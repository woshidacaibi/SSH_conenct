# Git

## 版本控制

### 本地版本控制：

单机运行，不支持多人开发，用软件记录文件的不同版本

### 集中化版本控制：

基于服务器、客户端的运行模式，客户端只保留最新的文件版本，历史版本由服务器保留。不支持离线提交

### 分布式版本控制（Git）：

基于服务器、客户端的运行模式，服务器保存所有版本，客户端是服务器的完整备份，也有全部的版本，可以客户端断网后支持离线本地提交版本更新。

## Git概念

### SVN差异比较

传统的版本控制系统（例如 SVN）是基于差异的版本控制，它们存储的是一组基本文件和每个文件随时间逐步累积的差异。

就是不对变化的文件进行记录，而是把变化的内容进行记录

![66398399494](.\assets\1663983994948.png)

节省磁盘空间，但是耗时效率低

### Git的记录快照

Git 快照是在原有文件版本的基础上重新生成一份新的文件，类似于备份。为了效率，如果文件没有修改，Git 不再重新存储该文件，而是只保留一个链接指向之前存储的文件。

就是不记录文件变化，有改变就保留旧文件，生成新文件取代。如果新版本没有更新，那就留个链接指向之前的最近文件即可。

空间换时间，版本切换时非常快，因为每个版本都是完整的文件快照，切换版本时直接恢复目标版本的快照即可，但是耗磁盘空间。

###  Git 中的绝大多数操作都只需要访问本地文件和资源

① 断网后依旧可以在本地对项目进行版本管理
② 联网后，把本地修改的记录同步到云端服务器即可

### Git的三个区域

工作区：处理编程代码

暂存区：完成的代码放到临时存放区域等待提交

Git仓库：代码最终存放区域

### Git三种状态

已修改 modified：修改了文件，但是还没放到暂存区

已暂存 staged：已修改的文件已做提交标记，使其包含到下次提交的列表中

已提交 committed：以安全存放Git仓库



三个区对应三个状态

工作区的文件被修改了，但还没有放到暂存区，就是已修改状态。
如果文件已修改并放入暂存区，就属于已暂存状态。
如果 Git 仓库中保存着特定版本的文件，就属于已提交状态。

### Git工作流程

① 在工作区中修改文件
② 将你想要下次提交的更改进行暂存
③ 提交更新，找到暂存区的文件，将快照永久性存储到 Git 仓库

## Git操作

清屏：clear

### 总体流程：

git init  初始化当前文件夹为git仓库

git add 文件 添加文件到跟踪状态

修改文件后

git add 文件 添加文件到暂存区

git commit -m 'message' 提交文件到git仓库，此时所有文件都处于已提交，最新状态

### 全局配置文件

到 C:/Users/用户名文件夹/.gitconfig 使用记事本查看

命令查看

git config --list --global

git config user.指定配置项

git help config

### 获取或创建Git仓库

① 将尚未进行版本控制的本地目录转换为 Git 仓库

​	① 在项目目录中，通过鼠标右键打开“Git Bash”
	② 执行 git init 命令将当前的目录转化为 Git 仓库	

**git init 命令**

会创建一个名为 .git 的隐藏目录，这个 .git 目录就是当前项目的 Git 仓库，里面包含了初始的必要文件，这些文件是 Git 仓库的必要组成部分

② 从其它服务器克隆一个已存在的 Git 仓库

### 工作区文件四种状态

**工作区**中的每一个文件可能有 4 种状态，这四种状态共分为两大类，如图所示：

![66398594005](..\\git+github\assets\1663985940053.png)

新建文件默认都是未跟踪

**Git 操作的终极结果：让工作区中的文件都处于“未修改”的状态。**

### 检查文件状态

git status

git status -s

绿色D 表示下次提交会把这玩意从git仓库中移除，

只存在于过往的版本中

前面A 表示新添加到暂存区中的文件

前面红色M 表示已修改 但未放到暂存区

前面绿色M 表示已修改 且放到暂存区

![66398610918](..\\git+github\assets\1663986109189.png)

untracked files 中显示为跟踪的文件

此外中文不会正常显示

未跟踪的文件意味着 Git 在之前的快照（提交）中没有这些文件；Git 不会自动将之纳入跟踪范围

### 添加跟踪文件、将修改提交到暂存区、把有冲突的文件标记为已解决状态

git add 文件名

### 提交更新

git commit -m "提交描述消息"

-m 必须写，要不跳到vim页面了

### 撤销文件修改

git checkout -- 文件名

把对工作区中对应文件的修改，还原成 Git 仓库中所保存的版本。
操作的结果：所有的修改会丢失，且无法恢复！危险性比较高，请慎重操作！

撤销操作的本质：**用 Git 仓库中保存的文件，覆盖工作区中指定的文件**

### . 表全部文件

### 向暂存区中一次性添加多个文件

git add **.** 注意是点

###  取消暂存的文件

git reset HEAD 文件名称

### 跳过暂存区直接提交Git仓库

git commit -a -m 'msg'

Git 就会自动把
所有已经跟踪过的文件暂存起来一并提交，从而跳过 git add 

### 移除文件

① 从 Git 仓库和工作区中同时移除对应的文件，status里直接找不到了

git rm --f 文件名

② 只从 Git 仓库中移除指定的文件（解除跟踪），但保留工作区中对应的文件

git rm --cached 文件名

### 忽略文件

一般我们总会有些文件无需纳入 Git 的管理，也不希望它们总出现在未跟踪文件列表。 在这种情况下，我们可
以创建一个名为 .gitignore 的配置文件，列出要忽略的文件的匹配模式。

文件 .gitignore 的格式规范如下：
① 以 # 开头的是注释
② 以 / 结尾的是目录
③ 以 / 开头防止递归
④ 以 ! 开头表示取反
⑤ 可以使用 glob 模式进行文件和文件夹的匹配（glob 指简化了的正则表达式）

#### 所谓的 glob 模式是指简化了的正则表达式：

① 星号 * 匹配零个或多个任意字符
② [abc] 匹配任何一个列在方括号中的字符 （此案例匹配一个 a 或匹配一个 b 或匹配一个 c）
③ 问号 ? 只匹配一个任意字符
④ 在方括号中使用短划线分隔两个字符， 表示所有在这两个字符范围内的都可以匹配（比如 [0-9] 表示匹配
所有 0 到 9 的数字）
⑤ 两个星号 ** 表示匹配任意中间目录（比如 a/**/z 可以匹配 a/z 、 a/b/z 或 a/b/c/z 等）

![66399987870](..\\git+github\assets\1663999878707.png)

流程：

创建 .gitignore ->编辑内容 此时就可以忽略内容了

但是需要上传到git仓库

->git add .gitignore  ->git commit -m '创建了忽视文件'

### 查看提交历史

![66400023707](..\\git+github\assets\1664000237071.png)

### 回退历史版本

git log 只能显示当前版本之前的版本信息

git reflog 能显示所有提交历史

![66400044551](.\assets\1664000445517.png)

## Github

开源协议

① BSD（Berkeley Software Distribution）
② Apache Licence 2.0
③ **GPL（GNU General Public License）**
⚫ 具有传染性的一种开源协议，不允许修改后和衍生的代码做为闭源的商业软件发布和销售
⚫ 使用 GPL 的最著名的软件项目是：Linux
④ LGPL（GNU Lesser General Public License）
**⑤ MIT（Massachusetts Institute of Technology, MIT）**
⚫ 是目前限制最少的协议，唯一的条件：在修改后的代码或者发行包中，必须包含原作者的许可信息
⚫ 使用 MIT 的软件项目有：jquery、Node.js

![66400270558](.\assets\1664002705587.png)



### HTTP更新本地仓库到github

直接输入

git remote add origin https://github.com/woshidacaibi/SSH_conenct.git
git branch -M main
git push -u origin main

git push

第一次使用得

git push -u origin master

SSH

生成SSH key

打开 Git Bash
粘贴如下的命令，并将 your_email@example.com 替换为注册 Github 账号时填写的邮箱：
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
③ 连续敲击 3 次回车，即可在 C:\Users\用户名文件夹\.ssh 目录中生成 id_rsa 和 id_rsa.pub 两个文

将SSH密码放到github个人设置中

输入

git remote add origin git@github.com:woshidacaibi/SSH_conenct.gitgit branch -M maingit push -u origin main

### 将远程仓库更新到本地

git clone  code中的地址

## Git分支

在进行多人协作开发的时候，为了防止互相干扰，提高协同开发的体验，建议每个开发者都基于分支进行项目功能的开发

![66400547716](assets/1664005477160.png)

### master主分支

在初始化本地 Git 仓库的时候，Git 默认已经帮我们创建了一个名字叫做 master 的分支。通常我们把这个master 分支叫做主分支。

master 主分支的作用是：用来保存和记录整个项目已完成的功能代码。不允许程序员直接在master分支上修改代码

### 功能分支

功能分支指的是专门用来开发新功能的分支，它是临时从 master 主分支上分叉出来的，当新功能开发且测试完毕后，最终需要合并到 master 主分支上

master分支会一直存在，功能分支比较短，当功能开发完成后就合并到主分支之后就没用了

### 查看分支

git branch 

星号表示当前分支

### 基于当前分支创建分支

git branch 新分支名称

使用如下的命令，可以创建指定名称的新分支，并立即切换到新分支上：

git checkout -b 分支名称

### 切换分支

git checkout 分支名

### 合并分支

//切换到主分支

git checkout master

//在主分支上执行合并分支命令

git merge 被合并的分支名

### 删除分支

git branch -d 分支名称

### 分支冲突

如果在两个不同的分支中，对同一个文件进行了不同的修改，Git 就没法干净的合并它们。 此时，我们需要打开这些包含冲突的文件然后手动解决冲突。

解决完后再 git add .
